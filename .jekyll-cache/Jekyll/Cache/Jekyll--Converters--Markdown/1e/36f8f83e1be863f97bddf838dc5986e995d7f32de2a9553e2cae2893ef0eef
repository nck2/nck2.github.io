I"Ö<h3 id="1-n-ê´€ê³„">1-N ê´€ê³„</h3>
<p>ì¥ê³ </p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
  <span class="n">content</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">post</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Post</span><span class="p">)</span>
  <span class="n">message</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

</code></pre></div></div>

<ul>
  <li>ìœ„ì—ì„œ Comment ëŠ” DBì— blog_comment ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±</li>
  <li>ì™¸ë˜í‚¤ë¡œ ì§€ì •ëœ postëŠ” DBì— post_id ë¼ëŠ” fields ìƒì„±</li>
  <li>ìœ„ì—ì„œ  post = models.ForeignKey(Post)ëŠ”
post = models.ForeignKey(â€˜Postâ€™) ë¡œ ì“¸ ìˆ˜ ìˆë‹¤.</li>
  <li>ì´ë•Œ,
    <ol>
      <li>post = models.ForeignKey(Post)
        <ul>
          <li>ë°˜ë“œì‹œ Postê°€ ìœ„ì— ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨.
2.post = models.ForeignKey(â€˜Postâ€™)</li>
          <li>ì–´ë””ì— ìˆë“  ìƒê´€ì—†ìŒ.</li>
        </ul>
      </li>
      <li>ë‹¤ë¥¸ ì•±ì— ìˆëŠ” ê²½ìš°ì—ëŠ”
post = models.ForeignKey(â€˜appname.Postâ€™)
ì™€ ê°™ì´ ì§€ì •í•˜ë©´ ëœë‹¤.</li>
    </ol>
  </li>
</ul>

<h3 id="tip">Tip</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">tag_set__name</span><span class="o">=</span><span class="s">'askdjango'</span><span class="p">)</span>
<span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">tag_set__name__in</span><span class="o">=</span><span class="p">[</span><span class="s">'askdjango'</span><span class="p">,</span><span class="s">'Python'</span><span class="p">])</span>
</code></pre></div></div>

<p>ì™€ ê°™ì´ ì¿¼ë¦¬ì…‹ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.</p>

<h3 id="userê³¼-ê´€ê³„-ì¶”ì²œ-ì„¤ì •">userê³¼ ê´€ê³„ ì¶”ì²œ ì„¤ì •</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">)</span>
<span class="n">profile</span><span class="o">.</span><span class="n">user_id</span>  <span class="c1"># idë²ˆí˜¸
</span><span class="n">profile</span><span class="o">.</span><span class="n">user</span> <span class="c1"># ì‘ì„±ì
</span></code></pre></div></div>

<ul>
  <li>ì¦‰, ëª¨ë¸ì„ êµ¬ì„±í•  ë•Œ,
<code class="highlighter-rouge">user = models.OneToOneField(settings.AUTH_USER_MODEL)</code>
ì¼ë•Œ Fetchê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">profile</span><span class="o">.</span><span class="n">user_id</span>  <span class="c1"># idë²ˆí˜¸
</span><span class="n">profile</span><span class="o">.</span><span class="n">user</span> <span class="c1"># ì‘ì„±ì
</span></code></pre></div>    </div>
    <p>ì™€ ê°™ì€ ëª…ë ¹ì–´ê°€ ë‚˜ì˜¬ë•Œ fetchê°€ ëœë‹¤. (laze)</p>
  </li>
</ul>

<h3 id="foreignkeyì—ì„œ-related_name">ForeignKeyì—ì„œ related_name</h3>
<p>post, comment ê°€ ìˆì„ë•Œ</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span><span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">Comment</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">post</span><span class="o">=</span><span class="n">post</span><span class="p">)</span> <span class="c1"># ë°©ë²•1
</span><span class="n">post</span><span class="o">.</span><span class="n">comment_set</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span> <span class="c1">#ë°©ë²•2 -related name ì‚¬ìš©
</span><span class="n">comment</span><span class="o">=</span> <span class="n">Comment</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">comment</span><span class="o">.</span><span class="n">post</span>
</code></pre></div></div>

<ul>
  <li>ì¤‘ê°„ì— ì™¸ë˜í‚¤ë¡œ ì—°ê²°ëœ userë¥¼ ì‚½ì…í•œ ê²½ìš° ì´ë¯¸ ìƒì„±ëœ ê°’ë“¤ì—
ì–´ë– í•œ ê°’ì„ ì—°ê²°í• ì§€ ë¬»ëŠ” ì§ˆë¬¸ì´ ë‚˜ì˜´.</li>
  <li>ì´ë•Œ ë„£ëŠ”ê²ƒì€ userì˜ ê°’ì´ ì•„ë‹ˆë¼, user_idì˜ ê°’ì„ ë¬»ëŠ” ê²ƒì„.
ë”°ë¼ì„œ User.objects.get(pk=1) ì´ë¼ í•˜ë©´ ì•ˆë˜ê³ 
ìˆ«ì 1ì€ ëœë‹¤.</li>
</ul>

<blockquote>
  <p><a href="https://nomade.kr">AskDjang</a> EP11. Model Relationship Fields</p>
</blockquote>
:ET